import{_ as c}from"./Bt3fWRG6.js";import{r as v,g as _,c as l,a as t,j as b,k as m,l as d,v as n,b as y,w,m as x,o as u,d as U}from"#entry";import{u as h}from"./CWJC2qwD.js";import"./CH4rY200.js";const k={class:"form-page-container"},N={class:"form-content-wrapper"},P={class:"form-group"},V={class:"form-group"},T={class:"form-group"},C={key:0,style:{color:"blue"}},D={key:1,style:{"margin-top":"10px"}},F=["src"],q={class:"form-group"},B={class:"form-buttons"},S=["disabled"],$={__name:"new",setup(I){const p=x(),i=v(!1),o=_({title:"",description:"",imageUrl:"",date:""}),g=async s=>{const e=s.target.files[0];if(!e)return;i.value=!0;const r=new FormData;r.append("image",e);try{const{imageUrl:a}=await $fetch("/api/upload",{method:"POST",body:r});a&&(o.imageUrl=a)}catch(a){alert("Failed to upload image: "+a.message)}finally{i.value=!1}},f=async()=>{if(!o.imageUrl){alert("Please upload an image first.");return}const{data:s,error:e}=await h("/api/blog",{method:"POST",body:JSON.stringify(o)},"$THpo_3Rw-W");s.value&&s.value.success?(alert("Post added successfully!"),p.push("/blog")):alert("Error adding post: "+(e.value?.message||"Unknown error"))};return(s,e)=>{const r=c;return u(),l("div",k,[t("div",N,[e[9]||(e[9]=t("h1",null,"Create New Blog Post",-1)),t("form",{onSubmit:b(f,["prevent"])},[t("div",P,[e[3]||(e[3]=t("label",{for:"title"},"Title",-1)),d(t("input",{type:"text",id:"title","onUpdate:modelValue":e[0]||(e[0]=a=>o.title=a),required:""},null,512),[[n,o.title]])]),t("div",V,[e[4]||(e[4]=t("label",{for:"description"},"Description",-1)),d(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=a=>o.description=a),required:""},null,512),[[n,o.description]])]),t("div",T,[e[5]||(e[5]=t("label",{for:"image"},"Upload Image",-1)),t("input",{type:"file",id:"image",onChange:g,accept:"image/*",required:""},null,32)]),i.value?(u(),l("div",C,"Uploading image...")):m("",!0),o.imageUrl?(u(),l("div",D,[e[6]||(e[6]=t("p",null,"Image uploaded. Preview:",-1)),t("img",{src:o.imageUrl,alt:"Uploaded Image",style:{"max-width":"200px","max-height":"200px"}},null,8,F)])):m("",!0),t("div",q,[e[7]||(e[7]=t("label",{for:"date"},"Date",-1)),d(t("input",{type:"date",id:"date","onUpdate:modelValue":e[2]||(e[2]=a=>o.date=a),required:""},null,512),[[n,o.date]])]),t("div",B,[t("button",{type:"submit",disabled:i.value},"Add Post",8,S),y(r,{to:"/blog"},{default:w(()=>[...e[8]||(e[8]=[U("Cancel",-1)])]),_:1})])],32)])])}}};export{$ as default};
